(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(window.jQuery)})(function(c){var a=0;c.ajaxTransport("iframe",function(b){if(b.async){var d,f,e;return{send:function(g,h){d=c('<form style="display:none;"></form>');d.attr("accept-charset",b.formAcceptCharset);e=/\?/.test(b.url)?"&":"?";"DELETE"===b.type?(b.url=b.url+e+"_method=DELETE",b.type="POST"):"PUT"===b.type?(b.url=b.url+e+"_method=PUT",b.type="POST"):"PATCH"===b.type&&(b.url=b.url+e+"_method=PATCH",b.type="POST");a+=
1;f=c('<iframe src="javascript:false;" name="iframe-transport-'+a+'"></iframe>').bind("load",function(){var a,e=c.isArray(b.paramName)?b.paramName:[b.paramName];f.unbind("load").bind("load",function(){var a;try{if(a=f.contents(),!a.length||!a[0].firstChild)throw Error();}catch(b){a=void 0}h(200,"success",{iframe:a});c('<iframe src="javascript:false;"></iframe>').appendTo(d);window.setTimeout(function(){d.remove()},0)});d.prop("target",f.prop("name")).prop("action",b.url).prop("method",b.type);b.formData&&
c.each(b.formData,function(a,b){c('<input type="hidden"/>').prop("name",b.name).val(b.value).appendTo(d)});b.fileInput&&b.fileInput.length&&"POST"===b.type&&(a=b.fileInput.clone(),b.fileInput.after(function(d){return a[d]}),b.paramName&&b.fileInput.each(function(d){c(this).prop("name",e[d]||b.paramName)}),d.append(b.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"));d.submit();a&&a.length&&b.fileInput.each(function(d,b){var f=c(a[d]);c(b).prop("name",f.prop("name"));
f.replaceWith(b)})});d.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src","javascript".concat(":false;"));d&&d.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(a){return a&&c(a[0].body).text()},"iframe json":function(a){return a&&c.parseJSON(c(a[0].body).text())},"iframe html":function(a){return a&&c(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&c.isXMLDoc(a)?a:c.parseXML(a.XMLDocument&&a.XMLDocument.xml||c(a.body).html())},"iframe script":function(a){return a&&
c.globalEval(c(a[0].body).text())}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],c):c(window.jQuery)})(function(c){c.support.fileInput=!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||c('<input type="file">').prop("disabled"));c.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.support.blobSlice=
window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:c(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!1,limitMultiFileUploads:1,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,maxNumberOfFiles:1,uploadedBytes:void 0,recalculateProgress:!0,
progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(a,b){a=this.messages[a]||a.toString();b&&c.each(b,function(d,b){a=a.replace("{"+d+"}",b)});return a},formData:function(a){return a.serializeArray()},add:function(a,b){(b.autoUpload||!1!==b.autoUpload&&c(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone",
"multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(a,b,d){var f=a-this.timestamp;if(!this.bitrate||!d||f>d)this.bitrate=1E3/f*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&
c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(a){var b;return"function"===typeof a.formData?a.formData(a.form):c.isArray(a.formData)?a.formData:"object"===c.type(a.formData)?(b=[],c.each(a.formData,function(a,f){b.push({name:a,value:f})}),b):[]},_getTotal:function(a){var b=0;c.each(a,function(a,f){b+=f.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?c.extend(a._progress,b):a._progress=b},_initResponseObject:function(a){var b;
if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var d=Date.now?Date.now():(new Date).getTime(),f;b._time&&b.progressInterval&&d-b._time<b.progressInterval&&a.loaded!==a.total||(b._time=d,f=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0),this._progress.loaded+=f-b._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,
b.bitrateInterval),b._progress.loaded=b.loaded=f,b._progress.bitrate=b.bitrate=b._bitrateTimer.getBitrate(d,f,b.bitrateInterval),this._trigger("progress",a,b),this._trigger("progressall",a,this._progress))}},_initProgressListener:function(a){var b=this,d=a.xhr?a.xhr():c.ajaxSettings.xhr();d.upload&&(c(d.upload).bind("progress",function(d){var c=d.originalEvent;d.lengthComputable=c.lengthComputable;d.loaded=c.loaded;d.total=c.total;b._onProgress(d,a)}),a.xhr=function(){return d})},_isInstanceOf:function(a,
b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var b=this,d,f=a.files[0],e=a.multipart||!c.support.xhrFileUpload,g=a.paramName[0];a.headers=c.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",f)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"');e?c.support.xhrFormDataFileUpload&&(a.postMessage?(d=this._getFormData(a),a.blob?d.push({name:g,value:a.blob}):c.each(a.files,
function(b,f){d.push({name:a.paramName[b]||g,value:f})})):(b._isInstanceOf("FormData",a.formData)?d=a.formData:(d=new FormData,c.each(this._getFormData(a),function(a,b){d.append(b.name,b.value)})),a.blob?d.append(g,a.blob,f.name):c.each(a.files,function(f,c){(b._isInstanceOf("File",c)||b._isInstanceOf("Blob",c))&&d.append(a.paramName[f]||g,c,c.name)})),a.data=d):(a.contentType=f.type,a.data=a.blob||f);a.blob=null},_initIframeSettings:function(a){var b=c("<a></a>").prop("href",a.url).prop("host");
a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=c(a.fileInput),d=a.paramName;d?c.isArray(d)||(d=[d]):(d=[],b.each(function(){for(var a=
c(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)d.push(b),a-=1}),d.length||(d=[b.prop("name")||"files[]"]));return d},_initFormSettings:function(a){a.form&&a.form.length||(a.form=c(a.fileInput.prop("form")),a.form.length||(a.form=c(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST");
a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=c.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,d){var f=c.Deferred(),e=f.promise();b=b||this.options.context||e;!0===
a?f.resolveWith(b,d):!1===a&&f.rejectWith(b,d);e.abort=f.promise;return this._enhancePromise(e)},_addConvenienceMethods:function(a,b){var d=this;b.process=function(a,e){if(a||e)b._processQueue=this._processQueue=(this._processQueue||c.Deferred().resolveWith(d,[this]).promise()).pipe(a,e);return this._processQueue||c.Deferred().resolveWith(d,[this]).promise()};b.submit=function(){"pending"!==this.state()&&(b.jqXHR=this.jqXHR=!1!==d._trigger("submit",a,this)&&d._onSend(a,this));return this.jqXHR||d._getXHRPromise()};
b.abort=function(){return this.jqXHR?this.jqXHR.abort():d._getXHRPromise()};b.state=function(){if(this.jqXHR)return d._getDeferredState(this.jqXHR);if(this._processQueue)return d._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,b){a.uploadedBytes=a.uploadedBytes||0;
var d=this,f=a.files[0],e=f.size,g=a.uploadedBytes,h=a.maxChunkSize||e,k=this._blobSlice,l=c.Deferred(),m=l.promise(),p,n;if(!(this._isXHRUpload(a)&&k&&(g||h<e))||a.data)return!1;if(b)return!0;if(g>=e)return f.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",f.error]);n=function(){var b=c.extend({},a),m=b._progress.loaded;b.blob=k.call(f,g,g+h,f.type);b.chunkSize=b.blob.size;b.contentRange="bytes "+g+"-"+(g+b.chunkSize-1)+"/"+e;d._initXHRData(b);d._initProgressListener(b);
p=(!1!==d._trigger("chunksend",null,b)&&c.ajax(b)||d._getXHRPromise(!1,b.context)).done(function(f,h,k){g=d._getUploadedBytes(k)||g+b.chunkSize;m+b.chunkSize-b._progress.loaded&&d._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-b.uploadedBytes,total:g-b.uploadedBytes}),b);a.uploadedBytes=b.uploadedBytes=g;b.result=f;b.textStatus=h;b.jqXHR=k;d._trigger("chunkdone",null,b);d._trigger("chunkalways",null,b);g<e?n():l.resolveWith(b.context,[f,h,k])}).fail(function(a,f,c){b.jqXHR=a;b.textStatus=
f;b.errorThrown=c;d._trigger("chunkfail",null,b);d._trigger("chunkalways",null,b);l.rejectWith(b.context,[a,f,c])})};this._enhancePromise(m);m.abort=function(){return p.abort()};n();return m},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=
this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,d,f){var e=f._progress.total,g=f._response;f._progress.loaded<e&&this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:e,total:e}),f);g.result=f.result=a;g.textStatus=f.textStatus=b;g.jqXHR=f.jqXHR=d;this._trigger("done",null,f)},_onFail:function(a,b,d,f){var c=f._response;f.recalculateProgress&&(this._progress.loaded-=f._progress.loaded,
this._progress.total-=f._progress.total);c.jqXHR=f.jqXHR=a;c.textStatus=f.textStatus=b;c.errorThrown=f.errorThrown=d;this._trigger("fail",null,f)},_onAlways:function(a,b,d,f){this._trigger("always",null,f)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var d=this,f,e,g,h,k=d._getAJAXSettings(b),l=function(){d._sending+=1;k._bitrateTimer=new d._BitrateTimer;return f=f||((e||!1===d._trigger("send",a,k))&&d._getXHRPromise(!1,k.context,e)||d._chunkedUpload(k)||c.ajax(k)).done(function(a,
b,f){d._onDone(a,b,f,k)}).fail(function(a,b,f){d._onFail(a,b,f,k)}).always(function(a,b,f){d._onAlways(a,b,f,k);d._sending-=1;d._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>d._sending)for(a=d._slots.shift();a;){if("pending"===d._getDeferredState(a)){a.resolve();break}a=d._slots.shift()}0===d._active&&d._trigger("stop")})};this._beforeSend(a,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?
(g=c.Deferred(),this._slots.push(g),h=g.pipe(l)):h=this._sequence=this._sequence.pipe(l,l),h.abort=function(){e=[void 0,"abort","abort"];return f?f.abort():(g&&g.rejectWith(k.context,e),l())},this._enhancePromise(h)):l()},_onAdd:function(a,b){var d=this,f=!0,e=c.extend({},this.options,b),g=e.limitMultiFileUploads,h=this._getParamName(e),k,l,m;if((e.singleFileUploads||g)&&this._isXHRUpload(e))if(!e.singleFileUploads&&g)for(l=[],k=[],m=0;m<b.files.length;m+=g)l.push(b.files.slice(m,m+g)),e=h.slice(m,
m+g),e.length||(e=h),k.push(e);else k=h;else l=[b.files],k=[h];b.originalFiles=b.files;c.each(l||b.files,function(e,g){var h=c.extend({},b);h.files=l?g:[g];h.paramName=k[e];d._initResponseObject(h);d._initProgressObject(h);d._addConvenienceMethods(a,h);return f=d._trigger("add",a,h)});return f},_replaceFileInput:function(a){var b=a.clone(!0);c("<form></form>").append(b)[0].reset();a.after(b).detach();c.cleanData(a.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(d,f){return f===
a[0]?b[0]:f});a[0]===this.element[0]&&(this.element=b)},_handleFileTreeEntry:function(a,b){var d=this,f=c.Deferred(),e=function(d){d&&!d.entry&&(d.entry=a);f.resolve([d])},g;b=b||"";a.isFile?a._file?(a._file.relativePath=b,f.resolve(a._file)):a.file(function(a){a.relativePath=b;f.resolve(a)},e):a.isDirectory?(g=a.createReader(),g.readEntries(function(c){d._handleFileTreeEntries(c,b+a.name+"/").done(function(a){f.resolve(a)}).fail(e)},e)):f.resolve([]);return f.promise()},_handleFileTreeEntries:function(a,
b){var d=this;return c.when.apply(c,c.map(a,function(a){return d._handleFileTreeEntry(a,b)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?this._handleFileTreeEntries(c.map(b,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):c.Deferred().resolve(c.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=
c(a);var b=a.prop("webkitEntries")||a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=c.makeArray(a.prop("files"));if(b.length)void 0===b[0].name&&b[0].fileName&&c.each(b,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return c.Deferred().resolve([]).promise();b=[{name:a.replace(/^.*\\/,"")}]}return c.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof c&&1!==a.length?c.when.apply(c,c.map(a,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],
arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=this,d={fileInput:c(a.target),form:c(a.target.form)};this._getFileInputFiles(d.fileInput).always(function(f){d.files=f;b.options.replaceFileInput&&b._replaceFileInput(d.fileInput);!1!==b._trigger("change",a,d)&&b._onAdd(a,d)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,d={files:[]};if(b&&b.length&&(c.each(b,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&
d.files.push(c)}),!1===this._trigger("paste",a,d)||!1===this._onAdd(a,d)))return!1},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,d=a.dataTransfer,f={};d&&d.files&&d.files.length&&(a.preventDefault(),this._getDroppedFiles(d).always(function(d){f.files=d;!1!==b._trigger("drop",a,f)&&b._onAdd(a,f)}))},_onDragOver:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=a.dataTransfer;if(b){if(!1===this._trigger("dragover",a))return!1;
-1!==c.inArray("Files",b.types)&&(b.dropEffect="copy",a.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));c.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,
"change")},_setOption:function(a,b){var d=-1!==c.inArray(a,this._specialOptions);d&&this._destroyEventHandlers();this._super(a,b);d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof c||(a.fileInput=c(a.fileInput));a.dropZone instanceof c||(a.dropZone=c(a.dropZone));a.pasteZone instanceof c||(a.pasteZone=
c(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===c.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},_initDataAttributes:function(){var a=this,b=this.options;c.each(c(this.element[0].cloneNode(!1)).data(),function(d,f){a._isRegExpOption(d,f)&&(f=a._getRegExp(f));b[d]=f})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);
this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(d){a.files=d;b._onAdd(null,a)}):(a.files=c.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var b=this,d=c.Deferred(),f=d.promise(),e,g;
f.abort=function(){g=!0;if(e)return e.abort();d.reject(null,"abort","abort");return f};this._getFileInputFiles(a.fileInput).always(function(f){g||(f.length?(a.files=f,e=b._onSend(null,a).then(function(a,b,f){d.resolve(a,b,f)},function(a,b,f){d.reject(a,b,f)})):d.reject())});return this._enhancePromise(f)}a.files=c.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],c):c(window.jQuery)})(function(c){var a=c.blueimp.fileupload.prototype.options.add;c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{processQueue:[],add:function(b,d){var f=c(this);d.process(function(){return f.fileupload("process",d)});a.call(this,b,d)}},processActions:{},_processFile:function(a){var d=this,f=c.Deferred().resolveWith(d,[a]).promise();this._trigger("process",null,a);c.each(a.processQueue,
function(a,b){var c=function(a){return d.processActions[b.action].call(d,a,b)};f=f.pipe(c,b.always&&c)});f.done(function(){d._trigger("processdone",null,a);d._trigger("processalways",null,a)}).fail(function(){d._trigger("processfail",null,a);d._trigger("processalways",null,a)});return f},_transformProcessQueue:function(a){var d=[];c.each(a.processQueue,function(){var f={},e=this.action,g=!0===this.prefix?e:this.prefix;c.each(this,function(d,e){"string"===c.type(e)&&"@"===e.charAt(0)?f[d]=a[e.slice(1)||
(g?g+d.charAt(0).toUpperCase()+d.slice(1):d)]:f[d]=e});d.push(f)});a.processQueue=d},processing:function(){return this._processing},process:function(a){var d=this,f=c.extend({},this.options,a);f.processQueue&&f.processQueue.length&&(this._transformProcessQueue(f),0===this._processing&&this._trigger("processstart"),c.each(a.files,function(a){var b=a?c.extend({},f):f,h=function(){return d._processFile(b)};b.index=a;d._processing+=1;d._processingQueue=d._processingQueue.pipe(h,h).always(function(){d._processing-=
1;0===d._processing&&d._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});(function(c){"function"===typeof define&&define.amd?define("jquery load-image load-image-meta load-image-exif load-image-ios canvas-to-blob ./jquery.fileupload-process".split(" "),c):c(window.jQuery,window.loadImage)})(function(c,a){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",
maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",
name:"@imagePreviewName",disabled:"@disableImagePreview"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1E7,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(b,d){if(d.disabled)return b;var f=this,e=b.files[b.index],g=c.Deferred();return"number"===
c.type(d.maxFileSize)&&e.size>d.maxFileSize||d.fileTypes&&!d.fileTypes.test(e.type)||!a(e,function(a){a.src&&(b.img=a);g.resolveWith(f,[b])},d)?b:g.promise()},resizeImage:function(b,d){if(d.disabled)return b;var f=this,e=c.Deferred(),g=function(a){b[a.getContext?"canvas":"img"]=a;e.resolveWith(f,[b])},h,k;d=c.extend({canvas:!0},d);if(b.exif&&(!0===d.orientation&&(d.orientation=b.exif.get("Orientation")),d.thumbnail&&(h=b.exif.get("Thumbnail"))))return a(h,g,d),e.promise();if(h=d.canvas&&b.canvas||
b.img)if(k=a.scale(h,d),k.width!==h.width||k.height!==h.height)return g(k),e.promise();return b},saveImage:function(a,d){if(!a.canvas||d.disabled)return a;var f=this,e=a.files[a.index],g=e.name,h=c.Deferred(),k=function(d){d.name||(e.type===d.type?d.name=e.name:e.name&&(d.name=e.name.replace(/\..+$/,"."+d.type.substr(6))));a.files[a.index]=d;h.resolveWith(f,[a])};if(a.canvas.mozGetAsFile)k(a.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(e.type)&&g||(g&&g.replace(/\..+$/,"")||"blob")+".png",e.type));
else if(a.canvas.toBlob)a.canvas.toBlob(k,e.type);else return a;return h.promise()},loadImageMetaData:function(b,d){if(d.disabled)return b;var f=this,e=c.Deferred();a.parseMetaData(b.files[b.index],function(a){c.extend(b,a);e.resolveWith(f,[b])},d);return e.promise()},saveImageMetaData:function(a,d){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||d.disabled)return a;var f=a.files[a.index],c=new Blob([a.imageHead,this._blobSlice.call(f,20)],{type:f.type});c.name=f.name;a.files[a.index]=c;return a},setImage:function(a,
d){var f=a.canvas||a.img;f&&!d.disabled&&(a.files[a.index][d.name||"preview"]=f);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],c):c(window.jQuery,window.loadImage)})(function(c,a){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),
processActions:{loadAudio:function(b,d){if(d.disabled)return b;var f=b.files[b.index],e;this._audioElement.canPlayType&&this._audioElement.canPlayType(f.type)&&("number"!==c.type(d.maxFileSize)||f.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(f.type))&&(f=a.createObjectURL(f))&&(e=this._audioElement.cloneNode(!1),e.src=f,e.controls=!0,b.audio=e);return b},setAudio:function(a,d){a.audio&&!d.disabled&&(a.files[a.index][d.name||"preview"]=a.audio);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],c):c(window.jQuery,window.loadImage)})(function(c,a){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),
processActions:{loadVideo:function(b,d){if(d.disabled)return b;var f=b.files[b.index],e;this._videoElement.canPlayType&&this._videoElement.canPlayType(f.type)&&("number"!==c.type(d.maxFileSize)||f.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(f.type))&&(f=a.createObjectURL(f))&&(e=this._videoElement.cloneNode(!1),e.src=f,e.controls=!0,b.video=e);return b},setVideo:function(a,d){a.video&&!d.disabled&&(a.files[a.index][d.name||"preview"]=a.video);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],c):c(window.jQuery)})(function(c){c.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|zip|mp4|doc?x|mp3|flv|avi|pdf)$/i,maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{getNumberOfFiles:c.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",
acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(a,b){if(b.disabled)return a;var d=c.Deferred(),f=this.options,e=a.files[a.index];"number"===c.type(b.maxNumberOfFiles)&&(f.getNumberOfFiles()||0)+a.files.length>b.maxNumberOfFiles?e.error=f.i18n("maxNumberOfFiles"):!b.acceptFileTypes||b.acceptFileTypes.test(e.type)||b.acceptFileTypes.test(e.name)?b.maxFileSize&&e.size>b.maxFileSize?e.error=f.i18n("maxFileSize"):
"number"===c.type(e.size)&&e.size<b.minFileSize?e.error=f.i18n("minFileSize"):delete e.error:e.error=f.i18n("acceptFileTypes");e.error||a.files.error?(a.files.error=!0,d.rejectWith(this,[a])):d.resolveWith(this,[a]);return d.promise()}}})});(function(c){"function"===typeof define&&define.amd?define("jquery tmpl ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),c):c(window.jQuery,window.tmpl)})(function(c,a,b){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,
prependFiles:!1,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().length},getFilesFromResponse:function(a){return a.result&&c.isArray(a.result.files)?a.result.files:[]},add:function(a,b){var e=c(this),g=e.data("blueimp-fileupload")||e.data("fileupload"),h=g.options,k=b.files;b.process(function(){return e.fileupload("process",b)}).always(function(){b.context=g._renderUpload(k).data("data",b);g._renderPreviews(b);h.filesContainer[h.prependFiles?"prepend":"append"](b.context);
g._forceReflow(b.context);g._transition(b.context).done(function(){!1===g._trigger("added",a,b)||!h.autoUpload&&!b.autoUpload||!1===b.autoUpload||b.files.error||b.submit()})})},send:function(a,b){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%");return e._trigger("sent",a,b)},done:function(a,
b){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g=(b.getFilesFromResponse||e.options.getFilesFromResponse)(b),h,k;b.context?b.context.each(function(l){var m=g[l]||{error:"Empty file upload result"};k=e._addFinishedDeferreds();e._transition(c(this)).done(function(){var g=c(this);h=e._renderDownload([m]).replaceAll(g);e._forceReflow(h);e._transition(h).done(function(){b.context=c(this);e._trigger("completed",a,b);e._trigger("finished",a,b);k.resolve()})})}):(h=e._renderDownload(g)[e.options.prependFiles?
"prependTo":"appendTo"](e.options.filesContainer),e._forceReflow(h),k=e._addFinishedDeferreds(),e._transition(h).done(function(){b.context=c(this);e._trigger("completed",a,b);e._trigger("finished",a,b);k.resolve()}))},fail:function(a,b){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g,h;b.context?b.context.each(function(k){if("abort"!==b.errorThrown){var l=b.files[k];l.error=l.error||b.errorThrown||!0;h=e._addFinishedDeferreds();e._transition(c(this)).done(function(){var k=c(this);
g=e._renderDownload([l]).replaceAll(k);e._forceReflow(g);e._transition(g).done(function(){b.context=c(this);e._trigger("failed",a,b);e._trigger("finished",a,b);h.resolve()})})}else h=e._addFinishedDeferreds(),e._transition(c(this)).done(function(){c(this).remove();e._trigger("failed",a,b);e._trigger("finished",a,b);h.resolve()})}):"abort"!==b.errorThrown?(b.context=e._renderUpload(b.files)[e.options.prependFiles?"prependTo":"appendTo"](e.options.filesContainer).data("data",b),e._forceReflow(b.context),
h=e._addFinishedDeferreds(),e._transition(b.context).done(function(){b.context=c(this);e._trigger("failed",a,b);e._trigger("finished",a,b);h.resolve()})):(e._trigger("failed",a,b),e._trigger("finished",a,b),e._addFinishedDeferreds().resolve())},progress:function(a,b){var e=Math.floor(b.loaded/b.total*100);b.context&&b.context.each(function(){c(this).find(".progress").attr("aria-valuenow",e).children().first().css("width",e+"%")})},progressall:function(a,b){var e=c(this),g=Math.floor(b.loaded/b.total*
100),h=e.find(".fileupload-progress"),k=h.find(".progress-extended");k.length&&k.html((e.data("blueimp-fileupload")||e.data("fileupload"))._renderExtendedProgress(b));h.find(".progress").attr("aria-valuenow",g).children().first().css("width",g+"%")},start:function(a){var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b._resetFinishedDeferreds();b._transition(c(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){var b=c(this).data("blueimp-fileupload")||
c(this).data("fileupload"),e=b._addFinishedDeferreds();c.when.apply(c,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");c(this).find(".progress-extended").html("&nbsp;");e.resolve()})},processstart:function(){c(this).addClass("fileupload-processing")},processstop:function(){c(this).removeClass("fileupload-processing")},destroy:function(a,
b){var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g=function(){e._transition(b.context).done(function(){c(this).remove();e._trigger("destroyed",a,b)})};b.url?c.ajax(b).done(g):g()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){a||(a=c.Deferred());this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),b=a.prop("href"),e=a.prop("download");
a.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",e,b].join(":"))}catch(d){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":(a/1E3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=
new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,
b){if(!a)return c();var e=a({files:b,formatFileSize:this._formatFileSize,options:this.options});return e instanceof c?e:c(this.options.templatesContainer).html(e).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(b,e){c(e).append(a.files[b].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},
_startHandler:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.closest(".template-upload").data("data");b&&b.submit&&!b.jqXHR&&b.submit()&&a.prop("disabled",!0)},_cancelHandler:function(a){a.preventDefault();var b=c(a.currentTarget).closest(".template-upload,.template-download"),e=b.data("data")||{};e.jqXHR?e.jqXHR.abort():(e.context=e.context||b,e.errorThrown="abort",this._trigger("fail",a,e))},_deleteHandler:function(a){a.preventDefault();var b=c(a.currentTarget);this._trigger("destroy",
a,c.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()))},_forceReflow:function(a){return c.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var b=c.Deferred();c.support.transition&&a.hasClass("fade")&&a.is(":visible")?a.bind(c.support.transition.end,function(e){e.target===a[0]&&(a.unbind(c.support.transition.end),b.resolveWith(a))}).toggleClass("in"):(a.toggleClass("in"),b.resolveWith(a));return b},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),
b=this.options.filesContainer;this._on(a.find(".start"),{click:function(a){a.preventDefault();b.find(".start").click()}});this._on(a.find(".cancel"),{click:function(a){a.preventDefault();b.find(".cancel").click()}});this._on(a.find(".delete"),{click:function(c){c.preventDefault();b.find(".toggle:checked").closest(".template-download").find(".delete").click();a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(a){b.find(".toggle").prop("checked",c(a.currentTarget).is(":checked"))}})},
_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();
this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var b=this.options;b.templatesContainer=this.document[0].createElement(b.filesContainer.prop("nodeName"));a&&(b.uploadTemplateId&&(b.uploadTemplate=a(b.uploadTemplateId)),
b.downloadTemplateId&&(b.downloadTemplate=a(b.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".files"):a.filesContainer instanceof c||(a.filesContainer=c(a.filesContainer))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();c.support.fileInput||this._disableFileInputButton()},enable:function(){var a=!1;this.options.disabled&&
(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});